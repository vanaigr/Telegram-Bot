datasource db {
  provider = "postgres"
}

generator tables {
  provider = "node ./src/db/tableGenerator.ts"
  output = "./tables.ts"
}

enum messageType {
    user
    assistant
}

model messages {
    chatId BigInt
    messageId BigInt

    date DateTime @db.Timestamp(6)
    type messageType
    raw Json
    needsResponse Boolean

    @@id([chatId, messageId])
}

model responses {
    sequenceNumber Int @id @default(autoincrement())
    raw Json
    respondsToChatId BigInt
    respondsToMessageId BigInt
}

enum downloadStatus {
    downloading
    error
    done
}

model photos {
    file_unique_id String @db.VarChar(512) @id
    raw Json
    status downloadStatus
    bytes Bytes
}
